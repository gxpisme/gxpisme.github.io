---
title: IP协议
date: 2018-07-31 21:30:21
tags:
  - TCP/IP
categories: TCP/IP
---

![](http://cdn.xpisme.com/201807311009_917.png)

## IP (Internet Protocol)
### IP相当于OSI参考模型的第3层-网络层
网络层的主要作用是“实现终端节点之间的通信”，也称点对点通信，point-to-point。
IP主要作用：在复杂的网络环境中将数据包发给最终的目标地址。

### IP 地址属于网络层地址
>作为网络层的IP，有这种地址信息，叫做IP地址。IP地址用于在"连接到网络中的所有主机中识别出进行通信的目标地址"。因此，在TCP/IP通信中所有主机或路由器必须设定自己的IP地址。

### IP属于面向无连接型
IP采用无连接型有两点原因：一是为了简化，而是为了提速。
IP只负责将数据发给目标主机，那么TCP则负责保证对端主机确实接收到了数据。

### IP 地址的定义
>IP地址由32位正整数来表示。IP地址在计算机内部以二进制方式被处理，由于人类不习惯采用二进制方式，所以将32位的IP地址每8位分为一组，分成4组，每组以“.”分开，再将每组数转换为十进制数。

![](http://cdn.xpisme.com/201807302039_840.png)

**IP地址由“网络标识（网络地址）”和“主机标识（主机地址）”两部分组成**

### IP 地址的分类
IP地址共四个字节
IP地址分为五类：A类、B类、C类、D类、E类
#### A 类
1. A类地址的第一位总是0
2. A类地址第一个字节为**网络地址**，其他三个字节为**主机地址**
3. IP地址写成二进制的形式如下：
   A类开始：0000 0000 . 0000 0000 . 0000 0000 . 0000 0000 - 0.0.0.0
   A类结束：0111 1111 . 1111 1111 . 1111 1111 . 1111 1111 - 127.255.255.255

#### B 类
1. B类地址的前两位是10
2. B类地址前两个字节为**网络地址**，后两个字节为**主机地址**
3. IP地址写成二进制的形式如下：
   B类开始：1000 0000 . 0000 0000 . 0000 0000 . 0000 0000 - 128.0.0.0
   B类结束：1011 1111 . 1111 1111 . 1111 1111 . 1111 1111 - 191.255.255.255

#### C 类
1. C类地址的前三位是110
2. C类地址前三个字节为**网络地址**，最后一个字节为**主机地址**
3. IP地址写成二进制的形式如下：
   C类开始：1100 0000 . 0000 0000 . 0000 0000 . 0000 0000 - 192.0.0.0
   C类结束：1101 1111 . 1111 1111 . 1111 1111 . 1111 1111 - 223.255.255.255

#### D 类
1. D类地址的前四位是1110
2. 从第1位到第32位是它的网络标识。
3. IP地址写成二进制的形式如下：
   D类开始：1110 0000 . 0000 0000 . 0000 0000 . 0000 0000 - 224.0.0.0
   D类结束：1110 1111 . 1111 1111 . 1111 1111 . 1111 1111 - 239.255.255.255
   ![](http://cdn.xpisme.com/201711151648_430.png)

## 广播地址、IP多播、子网掩码
### 广播地址
应用：广播地址用于在同一链路中相互连接的主机之间发送数据包。
广播地址：将IP地址中的主机地址全部设置为1，就是广播地址。
例如：172.20.0.0用二进制表示
10101100 00010100 00000000 00000000
B类地址从第1位到第16位是它的网络标识，从17位到第32位是主机地址，将主机地址全部设置为1，就成了广播地址。
10101100 00010100 11111111 1111111
十进制表示广播地址为 172.20.255.255

#### 广播分为本地广播和直接广播
本地广播：在本网络内的广播叫做本地广播，例如网络地址为192.168.0.0/24的情况下，广播地址为192.168.0.255。因为这个广播地址的IP包会被路由器屏蔽，所以不会达到192.168.0.0/24以外的其他链路上。
直接广播：在不同的网络之间的广播叫做直接广播。

### IP多播
#### 同时发送提高效率
在人们使用多播功能之前，一直采用广播的方式。广播将数据发给所有的终端主机，再有这些主机IP之上的一层判断是否有必要接受数据。
广播这种方式会给那些毫无关系的网络或主机带来影响，造成网络上很多不必要的流量。除此之外广播无法穿透路由，若给其他网段发送同样的包，就不得采用另一种机制。
#### IP多播与地址
多播使用D类地址。
![](http://cdn.xpisme.com/201807311152_467.png)

多播地址的可用范围：224.0.0.0 到 239.255.255.255
不需要路由控制的范围：224.0.0.0 到 224.0.0.255

### 子网掩码
子网掩码可以将某个IP地址划分成网络地址和主机地址两部分。
子网掩码用二进制方式表示的话，也是一个32位的数字，它对应IP地址**网络标识**部分的位全部为“1”，对应IP地址**主机标识**的部分全部为“0”。



待优化......
